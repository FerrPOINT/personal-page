# üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏ Docker

## ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã Docker –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö **—É–¥–∞–ª—è—é—Ç –¢–û–õ–¨–ö–û –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã** –∏ **–ù–ï —Ç—Ä–æ–≥–∞—é—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ**.

## üîç –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

### 1. `docker image prune -f`
- ‚úÖ –£–¥–∞–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ dangling –æ–±—Ä–∞–∑—ã** (–±–µ–∑ —Ç–µ–≥–æ–≤, –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ)
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** –æ–±—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** –æ–±—Ä–∞–∑—ã —Å —Ç–µ–≥–∞–º–∏

### 2. `docker container prune -f`
- ‚úÖ –£–¥–∞–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** (status=exited)
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### 3. `docker volume prune -f`
- ‚úÖ –£–¥–∞–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes** (dangling, –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ)
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** volumes, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** volumes —Å –¥–∞–Ω–Ω—ã–º–∏

### 4. `docker builder prune -af`
- ‚úÖ –û—á–∏—â–∞–µ—Ç **—Ç–æ–ª—å–∫–æ build cache** (–∫—ç—à —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤)
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** –æ–±—Ä–∞–∑—ã –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç** –¥–∞–Ω–Ω—ã–µ

### 5. `docker system prune -af`
- ‚úÖ –£–¥–∞–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã**:
  - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
  - –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ç–∏
  - Build cache
- ‚ùå **–ù–ï —É–¥–∞–ª—è–µ—Ç**:
  - –†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  - –û–±—Ä–∞–∑—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
  - Volumes (–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–ª–∏ –Ω–µ—Ç) - **–ë–ï–ó —Ñ–ª–∞–≥–∞ --volumes**
  - –î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## ‚ö†Ô∏è –ß—Ç–æ –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è (–∑–∞—â–∏—â–µ–Ω–æ)

- ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** - –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
- ‚úÖ **–û–±—Ä–∞–∑—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏** - –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
- ‚úÖ **Volumes —Å –¥–∞–Ω–Ω—ã–º–∏** - –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É–µ–º `prune -f` –±–µ–∑ `--volumes`)
- ‚úÖ **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏** - –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
- ‚úÖ **–î–∞–Ω–Ω—ã–µ –≤ volumes** - –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è

## üîí –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ

**–ú—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º `--volumes` –≤ `docker system prune`!**

```bash
# ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û (–∏—Å–ø–æ–ª—å–∑—É–µ–º)
docker system prune -af

# ‚ùå –û–ü–ê–°–ù–û (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º)
docker system prune -af --volumes  # –ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å volumes —Å –¥–∞–Ω–Ω—ã–º–∏!
```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π

### –ß—Ç–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–æ–Ω–∏ –ù–ï –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã)
docker ps

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã (–æ–Ω–∏ –ù–ï –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã)
docker images

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes (–æ–Ω–∏ –ù–ï –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã)
docker volume ls
docker ps -a --format "{{.Names}}: {{.Mounts}}"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ (dry-run)
docker image prune -f --dry-run 2>/dev/null || echo "dry-run –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –Ω–æ prune –±–µ–∑–æ–ø–∞—Å–µ–Ω"
```

## ‚úÖ –ö–æ–º–∞–Ω–¥—ã –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö (–≤—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã)

### –í `docker-cleanup.sh`:
```bash
docker image prune -f              # –¢–æ–ª—å–∫–æ dangling –æ–±—Ä–∞–∑—ã
docker container prune -f         # –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker volume prune -f            # –¢–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes
docker builder prune -af          # –¢–æ–ª—å–∫–æ build cache
docker image prune -af --filter "until=168h"  # –°—Ç–∞—Ä—ã–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker system prune -af          # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–ë–ï–ó --volumes!)
```

### –í `cleanup-disk.sh`:
```bash
docker image prune -f              # –¢–æ–ª—å–∫–æ dangling –æ–±—Ä–∞–∑—ã
docker container prune -f         # –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker builder prune -af          # –¢–æ–ª—å–∫–æ build cache
docker system prune -af          # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–ë–ï–ó --volumes!)
```

## üéØ –ò—Ç–æ–≥

**–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã:**
- ‚úÖ –£–¥–∞–ª—è—é—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- ‚úÖ –ù–µ —Ç—Ä–æ–≥–∞—é—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ –ù–µ —Ç—Ä–æ–≥–∞—é—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
- ‚úÖ –ù–µ —Ç—Ä–æ–≥–∞—é—Ç volumes —Å –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ù–µ —Ç—Ä–æ–≥–∞—é—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏

**–ù–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è!**

