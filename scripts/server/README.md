# –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–∞, –≤–∫–ª—é—á–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞)

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/personal-page  # –∏–ª–∏ –ø—É—Ç—å, –≥–¥–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–µ–∫—Ç

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–æ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç root)
./scripts/server/disk-manager.sh diagnose

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç root)
sudo ./scripts/server/disk-manager.sh setup

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./scripts/server/disk-manager.sh status

# –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç root)
sudo ./scripts/server/disk-manager.sh cleanup
```

## üìÅ –§–∞–π–ª—ã

### –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
- **`disk-manager.sh`** - –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- **`diagnose-disk-usage.sh`** - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞
- **`prevent-disk-full.sh`** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è
- **`test-scripts.sh`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

## üéØ –ö–æ–º–∞–Ω–¥—ã disk-manager.sh

### `diagnose` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∏—Å–∫–µ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç root).

```bash
./scripts/server/disk-manager.sh diagnose
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
- –°–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –ø–∞–ø–∫–∏
- –†–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
- Docker –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –ò –¥—Ä—É–≥–æ–µ

### `setup` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç—ã
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏—Å–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç root).

```bash
sudo ./scripts/server/disk-manager.sh setup
```

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ (logrotate)
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é –æ—á–∏—Å—Ç–∫—É Docker (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 3:00)
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (2:00)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç —Å –∞–ª–µ—Ä—Ç–∞–º–∏
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è systemd journal

### `cleanup` - –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
–í—ã–ø–æ–ª–Ω—è–µ—Ç —Ä—É—á–Ω—É—é –æ—á–∏—Å—Ç–∫—É –¥–∏—Å–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç root).

```bash
sudo ./scripts/server/disk-manager.sh cleanup
```

–û—á–∏—â–∞–µ—Ç:
- –°—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ (>7 –¥–Ω–µ–π)
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (>3 –¥–Ω—è)
- Docker –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã (>72 —á–∞—Å–∞)

### `status` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

```bash
./scripts/server/disk-manager.sh status
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ cron –∑–∞–¥–∞—á–∏
- –°—Ç–∞—Ç—É—Å —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`setup`) —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –¥–∏—Å–∫** –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç** –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ >85%
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç** –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ >95%
- **–†–æ—Ç–∏—Ä—É–µ—Ç –ª–æ–≥–∏** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (—Ö—Ä–∞–Ω–∏—Ç 7 –¥–Ω–µ–π)
- **–û—á–∏—â–∞–µ—Ç Docker** –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- **–û—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ

### –õ–æ–≥–∏

- `/var/log/disk-monitor.log` - –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `/var/log/docker-cleanup.log` - –õ–æ–≥–∏ –æ—á–∏—Å—Ç–∫–∏ Docker
- `/var/log/tmp-cleanup.log` - –õ–æ–≥–∏ –æ—á–∏—Å—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
tail -f /var/log/disk-monitor.log

# –í—Å–µ –ª–æ–≥–∏ –æ—á–∏—Å—Ç–∫–∏
tail -f /var/log/*-cleanup.log
```

## üîß –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–ø–æ—Å–ª–µ setup)

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `setup` —Å–æ–∑–¥–∞—é—Ç—Å—è:

- `/usr/local/bin/disk-monitor.sh` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞ (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç)
- `/usr/local/bin/docker-cleanup.sh` - –û—á–∏—Å—Ç–∫–∞ Docker (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- `/usr/local/bin/tmp-cleanup.sh` - –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- `/usr/local/bin/cleanup-disk.sh` - –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

## ‚öôÔ∏è Cron –∑–∞–¥–∞—á–∏

–ü–æ—Å–ª–µ `setup` –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è cron –∑–∞–¥–∞—á–∏:

- `*/30 * * * *` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞ (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç)
- `0 2 * * *` - –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00)
- `0 3 * * 0` - –û—á–∏—Å—Ç–∫–∞ Docker (–∫–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00)

–ü—Ä–æ–≤–µ—Ä–∫–∞ cron –∑–∞–¥–∞—á:
```bash
crontab -l
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å –Ω—É–ª—è

```bash
# 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
./scripts/server/disk-manager.sh diagnose > disk-diagnosis.txt

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç—ã
sudo ./scripts/server/disk-manager.sh setup

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./scripts/server/disk-manager.sh status

# 4. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - —Ä—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
sudo ./scripts/server/disk-manager.sh cleanup
```

### –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)
./scripts/server/disk-manager.sh status

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - —Ä—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
sudo ./scripts/server/disk-manager.sh cleanup
```

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–∏—Å–∫–æ–º

```bash
# 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
./scripts/server/disk-manager.sh diagnose

# 2. –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
sudo ./scripts/server/disk-manager.sh cleanup

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./scripts/server/disk-manager.sh status
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ root** –¥–ª—è –∫–æ–º–∞–Ω–¥ `setup` –∏ `cleanup`
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –°–∫—Ä–∏–ø—Ç—ã –Ω–µ —É–¥–∞–ª—è—é—Ç –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
3. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**: –°–∫—Ä–∏–ø—Ç `setup` —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é `/etc/systemd/journald.conf`
4. **Docker**: –û—á–∏—Å—Ç–∫–∞ Docker —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π

## üîç –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏—Å–∫–∞

1. **–õ–æ–≥–∏ –±–µ–∑ —Ä–æ—Ç–∞—Ü–∏–∏** (—Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞)
2. **Docker –æ–±—Ä–∞–∑—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**
3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –≤ `/tmp` –∏ `/var/tmp`
4. **Systemd journal** (–ª–æ–≥–∏ systemd)
5. **–°—Ç–∞—Ä—ã–µ —è–¥—Ä–∞ Linux**

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `/var/log/disk-monitor.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `bash -n scripts/server/disk-manager.sh`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞: `ls -la scripts/server/*.sh`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `./scripts/server/disk-manager.sh diagnose`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `../../DISK-MANAGEMENT.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–∏—Å–∫–æ–º
- `../../README-DISK-SCRIPTS.md` - –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º
- `../../QUICK-START.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

