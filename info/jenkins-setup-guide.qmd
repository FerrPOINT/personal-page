# –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ **–£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:**
- Jenkins –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Pipeline plugin —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- Git Plugin —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- SSH Credentials plugin —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- Jenkins job —Å–æ–∑–¥–∞–Ω (`personal-page-deploy`)

‚ùå **–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω—ã: `ssh-steps`, `docker-workflow`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH credentials –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É

---

## üîß –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Jenkins UI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ Jenkins: `http://192.168.1.49:32768/`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Manage Jenkins** ‚Üí **Plugins** ‚Üí **Available plugins**
3. –í –ø–æ–∏—Å–∫–µ –Ω–∞–π–¥–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
   - ‚úÖ **SSH Pipeline Steps** (ssh-steps)
   - ‚úÖ **Docker Pipeline** (docker-workflow)
4. –ù–∞–∂–º–∏—Ç–µ **Install without restart** –∏–ª–∏ **Download now and install after restart**
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
bash scripts/install-missing-plugins.sh
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ API –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UI.

---

## üîê –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH Credentials

–î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω—É–∂–µ–Ω SSH –∫–ª—é—á. –ï—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π SSH –∫–ª—é—á

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É `7eb10d5af2ad.vps.myjino.ru:49233`:

```bash
# –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É
bash scripts/setup-jenkins-ssh-credentials.sh ~/.ssh/id_rsa

# –ò–ª–∏ –µ—Å–ª–∏ –∫–ª—é—á –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É
bash scripts/setup-jenkins-ssh-credentials.sh ~/.ssh/id_ed25519
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π SSH –∫–ª—é—á —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Jenkins

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á
ssh-keygen -t ed25519 -C "jenkins-deploy" -f ~/.ssh/jenkins_deploy_key

# –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
cat ~/.ssh/jenkins_deploy_key.pub | ssh -p 49233 root@7eb10d5af2ad.vps.myjino.ru "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ credentials –≤ Jenkins
bash scripts/setup-jenkins-ssh-credentials.sh ~/.ssh/jenkins_deploy_key
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Jenkins UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://192.168.1.49:32768/credentials/store/system/domain/_/`
2. –ù–∞–∂–º–∏—Ç–µ **Add Credentials**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Kind**: SSH Username with private key
   - **ID**: `jenkins-ssh-deploy-key` (–≤–∞–∂–Ω–æ!)
   - **Username**: `root`
   - **Private Key**: –í—ã–±–µ—Ä–∏—Ç–µ **Enter directly** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
4. –ù–∞–∂–º–∏—Ç–µ **OK**

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
cat ~/.ssh/id_rsa
# –∏–ª–∏
cat ~/.ssh/id_ed25519
```

---

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
bash scripts/setup-jenkins-complete.sh
```

–û–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Jenkins
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã
- ‚úÖ SSH credentials
- ‚úÖ Jenkins job

---

## üöÄ –®–∞–≥ 4: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π build:

### –ß–µ—Ä–µ–∑ Jenkins UI:
1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://192.168.1.49:32768/job/personal-page-deploy`
2. –ù–∞–∂–º–∏—Ç–µ **Build Now**

### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
bash scripts/trigger-jenkins-build.sh
```

### –ß–µ—Ä–µ–∑ API:
```bash
curl -X POST -u ferrpoint:YOUR_JENKINS_API_TOKEN \
  http://192.168.1.49:32768/job/personal-page-deploy/build
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–ª–∞–≥–∏–Ω—ã –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Jenkins
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω—ã –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ UI
3. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Jenkins (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### –ü—Ä–æ–±–ª–µ–º–∞: SSH credentials –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ Jenkins —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ID: `jenkins-ssh-deploy-key`
2. –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   ssh -p 49233 root@7eb10d5af2ad.vps.myjino.ru
   ```
3. –ü—Ä–∞–≤–∞ –Ω–∞ –∫–ª—é—á –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:
   ```bash
   chmod 600 ~/.ssh/id_rsa
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: Build –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –í—Å–µ –ø–ª–∞–≥–∏–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. SSH credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. Jenkinsfile —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
4. –õ–æ–≥–∏ build –≤ Jenkins Console Output

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –ü–ª–∞–≥–∏–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (ssh-steps, docker-workflow)
- [ ] SSH credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (`jenkins-ssh-deploy-key`)
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π build –∑–∞–ø—É—â–µ–Ω
- [ ] Build –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: `info/jenkins-quickstart.qmd`
- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `info/jenkins-pipeline.qmd`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: `info/jenkins-auto-setup.qmd`

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ pipeline –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –¥–µ–ø–ª–æ—é.

