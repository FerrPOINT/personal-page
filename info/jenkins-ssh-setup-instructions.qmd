# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SSH –∫–ª—é—á–∞ –¥–ª—è Jenkins

## ‚úÖ SSH –∫–ª—é—á —Å–æ–∑–¥–∞–Ω

–ù–æ–≤—ã–π SSH –∫–ª—é—á —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Jenkins:
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á**: `~/.ssh/jenkins_deploy_key`
- **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á**: `~/.ssh/jenkins_deploy_key.pub`

---

## üìã –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–ª—é—á –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIN4xBlOe/vLk29al/YZqXpi1+jiFwAanLwPedpkchNzO jenkins-deploy-personal-page
```

---

## üöÄ –®–∞–≥ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)

```bash
bash scripts/add-ssh-key-to-server.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:
   ```bash
   ssh -p 49233 root@7eb10d5af2ad.vps.myjino.ru
   ```

2. –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á:
   ```bash
   mkdir -p ~/.ssh
   chmod 700 ~/.ssh
   echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIN4xBlOe/vLk29al/YZqXpi1+jiFwAanLwPedpkchNzO jenkins-deploy-personal-page" >> ~/.ssh/authorized_keys
   chmod 600 ~/.ssh/authorized_keys
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
   ```bash
   exit
   ssh -p 49233 -i ~/.ssh/jenkins_deploy_key root@7eb10d5af2ad.vps.myjino.ru
   ```

---

## üîê –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ credentials –≤ Jenkins

### –ß–µ—Ä–µ–∑ Jenkins UI:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Jenkins: `http://192.168.1.49:32768/`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Manage Jenkins** ‚Üí **Credentials** ‚Üí **System** ‚Üí **Global credentials (unrestricted)**
3. –ù–∞–∂–º–∏—Ç–µ **Add Credentials**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Kind**: `SSH Username with private key`
   - **Scope**: `Global`
   - **ID**: `jenkins-ssh-deploy-key` ‚ö†Ô∏è **–í–ê–ñ–ù–û: —Ç–æ—á–Ω–æ —ç—Ç–æ –∏–º—è!**
   - **Description**: `SSH key for deployment server`
   - **Username**: `root`
   - **Private Key**: –í—ã–±–µ—Ä–∏—Ç–µ **Enter directly**
   - –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞:
     ```bash
     cat ~/.ssh/jenkins_deploy_key
     ```
5. –ù–∞–∂–º–∏—Ç–µ **OK**

---

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
bash scripts/setup-jenkins-complete.sh
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
- ‚úÖ SSH credentials 'jenkins-ssh-deploy-key' –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üß™ –®–∞–≥ 4: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ credentials –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π build:

```bash
bash scripts/trigger-jenkins-build.sh
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Jenkins UI:
1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://192.168.1.49:32768/job/personal-page-deploy`
2. –ù–∞–∂–º–∏—Ç–µ **Build Now**

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 49233 –æ—Ç–∫—Ä—ã—Ç
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SSH

### –ü—Ä–æ–±–ª–µ–º–∞: Credentials –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Jenkins

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ID —Ç–æ—á–Ω–æ: `jenkins-ssh-deploy-key`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `-----BEGIN`)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Jenkins

### –ü—Ä–æ–±–ª–µ–º–∞: SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∫–ª—é—á–æ–º
ssh -p 49233 -i ~/.ssh/jenkins_deploy_key root@7eb10d5af2ad.vps.myjino.ru

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–ª—é—á
chmod 600 ~/.ssh/jenkins_deploy_key
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á**: `~/.ssh/jenkins_deploy_key` (—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!)
- **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á**: `~/.ssh/jenkins_deploy_key.pub` (–º–æ–∂–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å)
- **–°–µ—Ä–≤–µ—Ä**: `7eb10d5af2ad.vps.myjino.ru:49233`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `root`

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ Jenkins —Å–º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

